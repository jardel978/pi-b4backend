create table hibernate_sequences (sequence_name varchar(255) not null, next_val bigint, primary key (sequence_name));
insert into hibernate_sequences(sequence_name, next_val) values ('default',0);
create table tb_caracteristica (caracteristica_id bigint generated by default as identity, icone varchar(255), nome varchar(255), primary key (caracteristica_id));
create table tb_caracteristica_produto (produto_id bigint not null, caracteristica_id bigint not null, primary key (produto_id, caracteristica_id));
create table tb_categoria (categoria_id bigint generated by default as identity, descricao varchar(3000), nome varchar(255), qualificacao varchar(255), url_imagem varchar(255), primary key (categoria_id));
create table tb_cidade (cidade_tb bigint generated by default as identity, nome varchar(255), pais varchar(255), primary key (cidade_tb));
create table tb_cliente (usuario_id bigint not null, data_validacao_registro timestamp, email varchar(255), nome varchar(255), senha varchar(255), sobrenome varchar(255), usuario_validado boolean, funcao_id bigint, endereco varchar(255), primary key (usuario_id));
create table tb_data_reserva_qtd (data date not null, qtd_pessoas integer, produto_id bigint not null, primary key (data, produto_id));
create table tb_funcao (funcao_id bigint generated by default as identity, nome_funcao_enum varchar(255), primary key (funcao_id));
create table tb_imagem (imagem_id bigint generated by default as identity, img_capa boolean, titulo varchar(255), url varchar(255), produto_id bigint, primary key (imagem_id));
create table tb_ordem_pagamento (ordem_id bigint generated by default as identity, descricao varchar(255), moeda varchar(255), token_id varchar(255), transacao_id varchar(255), valor integer not null, reserva_reserva_id bigint, primary key (ordem_id));
create table tb_produto (produto_id bigint generated by default as identity, descricao varchar(3000), endereco varchar(255), latitude double, limite_pessoas_por_dia integer, longitude double, nome varchar(255), nota_avaliacao_clientes double, qtd_avaliacoes integer, valor_por_pessoa double, categoria_id bigint, cidade_id bigint, primary key (produto_id));
create table tb_reserva (reserva_id bigint generated by default as identity, data_final date, data_inicio date, horario_inicio time, qtd_pessoas integer, status varchar(255), valor_total double, usuario_id bigint, ordem_de_pagamento_ordem_id bigint, produto_id bigint, primary key (reserva_id));
create table tb_score_produto (valor double, produto_id bigint not null, cliente_id bigint not null, primary key (cliente_id, produto_id));
create table tb_usuario (usuario_id bigint not null, data_validacao_registro timestamp, email varchar(255), nome varchar(255), senha varchar(255), sobrenome varchar(255), usuario_validado boolean, funcao_id bigint, primary key (usuario_id));
alter table tb_caracteristica add constraint UK_6mo5slbk463gbjlbl0v701r4s unique (nome);
alter table tb_categoria add constraint UK_at5cf41guxjf4dkdeo5qxva9 unique (nome);
alter table tb_cidade add constraint UK_5xiqdsghgoik8gktypryaadfx unique (nome);
alter table tb_cliente add constraint UK_ir2m70agseiyyajtaxq7wsw20 unique (email);
alter table tb_produto add constraint UK_l92t5rjqi0jvn96n4ltn044rw unique (nome);
alter table tb_usuario add constraint UK_spmnyb4dsul95fjmr5kmdmvub unique (email);
alter table tb_caracteristica_produto add constraint FKafffniwun2rgqxlbj9bp08kw6 foreign key (caracteristica_id) references tb_caracteristica;
alter table tb_caracteristica_produto add constraint FKdpfxey2cg55fim4e9ax5bjyg6 foreign key (produto_id) references tb_produto;
alter table tb_cliente add constraint FK_i23egpkjqfpodufx7n6speod9 foreign key (funcao_id) references tb_funcao;
alter table tb_data_reserva_qtd add constraint FKalf48apvqrmh1wrievip781b0 foreign key (produto_id) references tb_produto;
alter table tb_imagem add constraint fk_produto_imagem foreign key (produto_id) references tb_produto;
alter table tb_ordem_pagamento add constraint FKd6lkqxn3cix34h3l5g2cn6he9 foreign key (reserva_reserva_id) references tb_reserva;
alter table tb_produto add constraint fk_categoria_produto foreign key (categoria_id) references tb_categoria;
alter table tb_produto add constraint fk_cidade_produto foreign key (cidade_id) references tb_cidade;
alter table tb_reserva add constraint fk_usuario_reserva foreign key (usuario_id) references tb_cliente;
alter table tb_reserva add constraint FK9utq9ro2t10n5e8kynhrl4qty foreign key (ordem_de_pagamento_ordem_id) references tb_ordem_pagamento;
alter table tb_reserva add constraint fk_produto_reserva foreign key (produto_id) references tb_produto;
alter table tb_score_produto add constraint FKtqn12ghu1defww0c8a09xajgf foreign key (produto_id) references tb_produto;
alter table tb_score_produto add constraint FKkydygdo8cax7lofdmgac7c03w foreign key (cliente_id) references tb_cliente;
alter table tb_usuario add constraint fk_funcao foreign key (funcao_id) references tb_funcao;
